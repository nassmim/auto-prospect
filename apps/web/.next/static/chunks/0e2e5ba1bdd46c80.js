(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67235,e=>{"use strict";var r=e.i(4386),t=e.i(57080);let n=(0,t.createServerReference)("40bc40327414d65c149623d29751f6236173c3d9aa",t.callServer,void 0,t.findSourceMapURL,"createHunt"),s=(0,t.createServerReference)("60611e6860255adc0799d2db64bb54465f1f907a39",t.callServer,void 0,t.findSourceMapURL,"updateHunt");var a=e.i(68381),i=e.i(44904),o=e.i(92767),l=e.i(33167),c=e.i(17902),d=e.i(94066),u=e.i(9633),m=e.i(52067),x=e.i(33779),h=e.i(77964),p=e.i(68822),b=e.i(69321),f=e.i(66208),g=e.i(38429),v="rovingFocusGroup.onEntryFocus",j={bubbles:!1,cancelable:!0},z="RovingFocusGroup",[y,N,w]=(0,m.createCollection)(z),[C,k]=(0,u.createContextScope)(z,[w]),[L,F]=C(z),R=c.forwardRef((e,t)=>(0,r.jsx)(y.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(y.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(S,{...e,ref:t})})}));R.displayName=z;var S=c.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:m,preventScrollOnEntryFocus:h=!1,...y}=e,w=c.useRef(null),C=(0,x.useComposedRefs)(t,w),k=(0,g.useDirection)(i),[F,R]=(0,f.useControllableState)({prop:o,defaultProp:l??null,onChange:u,caller:z}),[S,I]=c.useState(!1),E=(0,b.useCallbackRef)(m),M=N(n),P=c.useRef(!1),[T,A]=c.useState(0);return c.useEffect(()=>{let e=w.current;if(e)return e.addEventListener(v,E),()=>e.removeEventListener(v,E)},[E]),(0,r.jsx)(L,{scope:n,orientation:s,dir:k,loop:a,currentTabStopId:F,onItemFocus:c.useCallback(e=>R(e),[R]),onItemShiftTab:c.useCallback(()=>I(!0),[]),onFocusableItemAdd:c.useCallback(()=>A(e=>e+1),[]),onFocusableItemRemove:c.useCallback(()=>A(e=>e-1),[]),children:(0,r.jsx)(p.Primitive.div,{tabIndex:S||0===T?-1:0,"data-orientation":s,...y,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,d.composeEventHandlers)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,d.composeEventHandlers)(e.onFocus,e=>{let r=!P.current;if(e.target===e.currentTarget&&r&&!S){let r=new CustomEvent(v,j);if(e.currentTarget.dispatchEvent(r),!r.defaultPrevented){let e=M().filter(e=>e.focusable);V([e.find(e=>e.active),e.find(e=>e.id===F),...e].filter(Boolean).map(e=>e.ref.current),h)}}P.current=!1}),onBlur:(0,d.composeEventHandlers)(e.onBlur,()=>I(!1))})})}),I="RovingFocusGroupItem",E=c.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,u=(0,h.useId)(),m=i||u,x=F(I,n),b=x.currentTabStopId===m,f=N(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:j}=x;return c.useEffect(()=>{if(s)return g(),()=>v()},[s,g,v]),(0,r.jsx)(y.ItemSlot,{scope:n,id:m,focusable:s,active:a,children:(0,r.jsx)(p.Primitive.span,{tabIndex:b?0:-1,"data-orientation":x.orientation,...l,ref:t,onMouseDown:(0,d.composeEventHandlers)(e.onMouseDown,e=>{s?x.onItemFocus(m):e.preventDefault()}),onFocus:(0,d.composeEventHandlers)(e.onFocus,()=>x.onItemFocus(m)),onKeyDown:(0,d.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void x.onItemShiftTab();if(e.target!==e.currentTarget)return;let r=function(e,r,t){var n;let s=(n=e.key,"rtl"!==t?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===r&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===r&&["ArrowUp","ArrowDown"].includes(s)))return M[s]}(e,x.orientation,x.dir);if(void 0!==r){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===r)s.reverse();else if("prev"===r||"next"===r){var t,n;"prev"===r&&s.reverse();let a=s.indexOf(e.currentTarget);s=x.loop?(t=s,n=a+1,t.map((e,r)=>t[(n+r)%t.length])):s.slice(a+1)}setTimeout(()=>V(s))}}),children:"function"==typeof o?o({isCurrentTabStop:b,hasTabStop:null!=j}):o})})});E.displayName=I;var M={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function V(e,r=!1){let t=document.activeElement;for(let n of e)if(n===t||(n.focus({preventScroll:r}),document.activeElement!==t))return}var P=e.i(84830),T="Tabs",[A,D]=(0,u.createContextScope)(T,[k]),U=k(),[H,W]=A(T),q=c.forwardRef((e,t)=>{let{__scopeTabs:n,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=(0,g.useDirection)(l),[m,x]=(0,f.useControllableState)({prop:s,onChange:a,defaultProp:i??"",caller:T});return(0,r.jsx)(H,{scope:n,baseId:(0,h.useId)(),value:m,onValueChange:x,orientation:o,dir:u,activationMode:c,children:(0,r.jsx)(p.Primitive.div,{dir:u,"data-orientation":o,...d,ref:t})})});q.displayName=T;var B="TabsList",K=c.forwardRef((e,t)=>{let{__scopeTabs:n,loop:s=!0,...a}=e,i=W(B,n),o=U(n);return(0,r.jsx)(R,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:(0,r.jsx)(p.Primitive.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});K.displayName=B;var $="TabsTrigger",_=c.forwardRef((e,t)=>{let{__scopeTabs:n,value:s,disabled:a=!1,...i}=e,o=W($,n),l=U(n),c=X(o.baseId,s),u=J(o.baseId,s),m=s===o.value;return(0,r.jsx)(E,{asChild:!0,...l,focusable:!a,active:m,children:(0,r.jsx)(p.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:(0,d.composeEventHandlers)(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)}),onKeyDown:(0,d.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)}),onFocus:(0,d.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;m||a||!e||o.onValueChange(s)})})})});_.displayName=$;var G="TabsContent",O=c.forwardRef((e,t)=>{let{__scopeTabs:n,value:s,forceMount:a,children:i,...o}=e,l=W(G,n),d=X(l.baseId,s),u=J(l.baseId,s),m=s===l.value,x=c.useRef(m);return c.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(P.Presence,{present:a||m,children:({present:n})=>(0,r.jsx)(p.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!n,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:x.current?"0s":void 0},children:n&&i})})});function X(e,r){return`${e}-trigger-${r}`}function J(e,r){return`${e}-content-${r}`}O.displayName=G;var Q=e.i(8303);function Y({className:e,...t}){return(0,r.jsx)(q,{"data-slot":"tabs",className:(0,Q.cn)("flex flex-col gap-2",e),...t})}function Z({className:e,...t}){return(0,r.jsx)(K,{"data-slot":"tabs-list",className:(0,Q.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function ee({className:e,...t}){return(0,r.jsx)(_,{"data-slot":"tabs-trigger",className:(0,Q.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function er({className:e,...t}){return(0,r.jsx)(O,{"data-slot":"tabs-content",className:(0,Q.cn)("flex-1 outline-none",e),...t})}var et=e.i(5122);e.i(1032);var en=e.i(83360),es=e.i(62545),ea=e.i(29822),ei=e.i(55361),eo=e.i(22204);function el({templates:e,outreachSettings:t,templateIds:n,channelCredits:s,onOutreachChange:a,onTemplateChange:i,onChannelCreditsChange:o}){let l=[{key:"leboncoin",label:"Leboncoin",requiresCredits:!1,icon:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),description:"Envoie un message via la messagerie Leboncoin"},{key:"whatsapp",label:"WhatsApp",requiresCredits:!0,icon:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),description:"Envoie un message WhatsApp au vendeur (nécessite numéro)"},{key:"sms",label:"SMS",requiresCredits:!0,icon:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),description:"Envoie un SMS au vendeur (nécessite numéro)"},{key:"ringlessVoice",label:"Message Vocal (Ringless)",requiresCredits:!0,icon:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),description:"Dépose un message vocal dans la boîte vocale (nécessite numéro)"}];return(0,r.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,r.jsx)("h3",{className:"mb-4 text-sm font-semibold text-zinc-300",children:"Paramètres de prise de contact"}),(0,r.jsx)("div",{className:"space-y-6",children:l.map(l=>{let c=t[l.key],d=(r=>{if("leboncoin"===r);else if("whatsapp"===r)return e.filter(e=>e.channel===eo.EContactChannel.WHATSAPP_TEXT&&!e.audioUrl);else if("sms"===r)return e.filter(e=>"sms"===e.channel&&!e.audioUrl);else if("ringlessVoice"===r)return e.filter(e=>"ringlessVoice"===e.channel&&e.audioUrl);return[]})(l.key);return(0,r.jsxs)("div",{className:`rounded-lg border p-4 transition-colors ${c?"border-amber-900/50 bg-amber-950/10":"border-zinc-800 bg-zinc-950/50"}`,children:[(0,r.jsxs)("div",{className:"mb-3 flex items-start gap-3",children:[(0,r.jsx)("input",{type:"checkbox",id:`channel-${l.key}`,checked:c,onChange:()=>{var e;return e=l.key,void a({...t,[e]:!t[e]})},className:"mt-1 h-4 w-4 rounded border-zinc-700 bg-zinc-900 text-amber-500 focus:ring-2 focus:ring-amber-500 focus:ring-offset-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("label",{htmlFor:`channel-${l.key}`,className:"flex items-center gap-2 text-sm font-medium text-zinc-300 cursor-pointer",children:[l.icon,l.label]}),(0,r.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:l.description})]})]}),c&&(0,r.jsxs)("div",{className:"mt-3 space-y-3 pl-7",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:`template-${l.key}`,className:"mb-2 block text-xs font-medium text-zinc-400",children:"Template à utiliser"}),0===d.length?(0,r.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-3 text-xs text-zinc-500",children:["Aucun template disponible pour ce canal."," ",(0,r.jsx)("a",{href:et.pages.templates.new(),className:"text-amber-500 hover:underline",children:"Créer un template"})]}):(0,r.jsxs)("select",{id:`template-${l.key}`,value:n[l.key]||"",onChange:e=>{var r,t;return r=l.key,t=e.target.value,void i({...n,[r]:t||null})},className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-3 py-2 text-sm text-zinc-200 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500",children:[(0,r.jsx)("option",{value:"",children:"Sélectionner un template..."}),d.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.audioUrl?"Vocal":"Texte",")"]},e.id))]})]}),l.requiresCredits&&"leboncoin"!==l.key&&(0,r.jsx)("div",{children:"whatsapp"===l.key?(0,r.jsxs)("div",{className:"rounded-lg border border-green-900/30 bg-green-950/20 p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("p",{className:"text-xs font-medium text-green-400",children:"Messages WhatsApp illimités"})]}),(0,r.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Envoyez jusqu'à 1000 messages WhatsApp par jour gratuitement"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:`credits-${l.key}`,className:"mb-2 block text-xs font-medium text-zinc-400",children:"Crédits à allouer"}),(0,r.jsx)("input",{type:"number",id:`credits-${l.key}`,min:"0",step:"1",value:s?.[l.key]||0,onChange:e=>{var r,t;return r=l.key,t=parseInt(e.target.value)||0,void(o&&o({...s,[r]:t}))},className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-3 py-2 text-sm text-zinc-200 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500",placeholder:"0"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"1 crédit = 1 contact. Ces crédits seront déduits de votre solde d'organisation."})]})})]})]},l.key)})})]})}function ec({value:e,onChange:t}){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-amber-900/50 bg-amber-950/20 p-6 text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-amber-500/10",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,r.jsx)("h3",{className:"mb-2 text-sm font-semibold text-amber-500",children:"Fonctionnalité à venir"}),(0,r.jsx)("p",{className:"text-xs text-zinc-400",children:'Le constructeur de recherche visuel sera disponible dans une prochaine version. En attendant, utilisez l\'onglet "Coller une URL" pour créer vos recherches.'})]}),(0,r.jsxs)("div",{className:"space-y-4 opacity-50 pointer-events-none",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Plateforme"}),(0,r.jsx)("select",{disabled:!0,className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200",children:(0,r.jsx)("option",{children:"Leboncoin"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Localisation"}),(0,r.jsx)("input",{type:"text",disabled:!0,placeholder:"Ex: Paris",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Prix minimum"}),(0,r.jsx)("input",{type:"number",disabled:!0,placeholder:"0",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Prix maximum"}),(0,r.jsx)("input",{type:"number",disabled:!0,placeholder:"Illimité",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Marques"}),(0,r.jsx)("input",{type:"text",disabled:!0,placeholder:"Sélectionner des marques...",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]})]})}function ed({value:e,onChange:t}){return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"searchUrl",className:"mb-2 block text-sm font-medium text-zinc-300",children:"URL de recherche Leboncoin"}),(0,r.jsx)("input",{id:"searchUrl",type:"url",value:e,onChange:e=>t(e.target.value),placeholder:"https://www.leboncoin.fr/recherche?category=2&...",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 font-mono text-sm text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"}),(0,r.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Effectuez votre recherche sur Leboncoin, puis copiez l'URL complète ici"})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-950 p-4",children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-semibold text-zinc-300",children:"Comment obtenir l'URL ?"}),(0,r.jsxs)("ol",{className:"space-y-1 text-xs text-zinc-400",children:[(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-amber-500",children:"1."}),(0,r.jsx)("span",{children:"Allez sur leboncoin.fr et effectuez votre recherche"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-amber-500",children:"2."}),(0,r.jsx)("span",{children:"Appliquez tous les filtres souhaités (prix, marque, localisation, etc.)"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-amber-500",children:"3."}),(0,r.jsx)("span",{children:"Copiez l'URL complète de la page de résultats"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{className:"font-semibold text-amber-500",children:"4."}),(0,r.jsx)("span",{children:"Collez l'URL dans le champ ci-dessus"})]})]})]})]})}function eu({templates:e,hunt:t}){let[d,u]=(0,c.useState)("url"),[m,x]=(0,c.useState)(null),h=(0,ea.useRouter)(),[p,b]=(0,c.useState)(""),[f,g]=(0,c.useState)({platform:"leboncoin",priceMin:0,priceMax:null,mileageMin:0,mileageMax:null,brands:[],location:"",radius:0}),v=(0,ei.useForm)({resolver:(0,es.zodResolver)(en.huntFormSchema),defaultValues:{name:t?.name??"",autoRefresh:t?.autoRefresh??!0,dailyPacingLimit:null,outreachSettings:t?.outreachSettings??{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1},templateIds:t?.templateIds??{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null},channelCredits:{sms:0,whatsapp:0,ringlessVoice:0}}}),j=(0,ei.useWatch)({control:v.control,name:"outreachSettings",defaultValue:{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1}}),z=(0,ei.useWatch)({control:v.control,name:"templateIds",defaultValue:{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null}}),y=(0,ei.useWatch)({control:v.control,name:"channelCredits",defaultValue:{sms:0,whatsapp:0,ringlessVoice:0}}),N=async e=>{if(x(null),!t&&"url"===d&&!p.trim())return void x("Veuillez coller une URL de recherche Leboncoin");try{t?await s(t.id,{name:e.name,autoRefresh:e.autoRefresh,dailyPacingLimit:e.dailyPacingLimit,outreachSettings:e.outreachSettings,templateIds:e.templateIds}):await n({name:e.name,locationId:1,radiusInKm:0,adTypeId:1,autoRefresh:e.autoRefresh,dailyPacingLimit:e.dailyPacingLimit,outreachSettings:e.outreachSettings,templateIds:e.templateIds}),h.push(et.pages.hunts.list)}catch(e){console.error(t?"Failed to update hunt:":"Failed to create hunt:",e),x(e instanceof Error?e.message:t?"Failed to update hunt":"Failed to create hunt")}};return(0,r.jsx)(o.Form,{...v,children:(0,r.jsxs)("form",{onSubmit:v.handleSubmit(N),className:"space-y-6",children:[m&&(0,r.jsx)("div",{className:"rounded-lg border border-red-900/50 bg-red-950/30 p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-400",children:m})}),(0,r.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,r.jsx)(o.FormField,{control:v.control,name:"name",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{className:"text-sm font-medium text-zinc-300",children:"Nom de la recherche"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(l.Input,{...e,placeholder:"Ex: Peugeot 308 GTI Paris",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"})}),(0,r.jsx)(o.FormMessage,{className:"text-red-400"})]})})}),(0,r.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,r.jsx)("h3",{className:"mb-4 text-sm font-semibold text-zinc-300",children:"Définir la recherche"}),(0,r.jsxs)(Y,{value:d,onValueChange:e=>u(e),children:[(0,r.jsxs)(Z,{className:"mb-6",children:[(0,r.jsx)(ee,{value:"url",children:"Coller une URL"}),(0,r.jsx)(ee,{value:"builder",children:"Constructeur de recherche"})]}),(0,r.jsx)(er,{value:"url",children:(0,r.jsx)(ed,{value:p,onChange:b})}),(0,r.jsx)(er,{value:"builder",children:(0,r.jsx)(ec,{value:f,onChange:g})})]})]}),(0,r.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,r.jsx)(o.FormField,{control:v.control,name:"autoRefresh",render:({field:e})=>(0,r.jsx)(o.FormItem,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(i.Checkbox,{checked:e.value,onCheckedChange:e.onChange,className:"h-4 w-4 rounded border-zinc-700 bg-zinc-900 text-amber-500 focus:ring-2 focus:ring-amber-500 focus:ring-offset-0"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.FormLabel,{className:"text-sm font-medium text-zinc-300 cursor-pointer",children:"Rafraîchissement automatique"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500",children:"Recherche automatiquement de nouvelles annonces tous les jours"})]})]})})})}),(0,r.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,r.jsx)(o.FormField,{control:v.control,name:"dailyPacingLimit",render:({field:e})=>(0,r.jsxs)(o.FormItem,{children:[(0,r.jsx)(o.FormLabel,{className:"text-sm font-medium text-zinc-300",children:"Limite de contacts par jour (optionnel)"}),(0,r.jsx)(o.FormControl,{children:(0,r.jsx)(l.Input,{...e,type:"number",min:"1",max:"1000",value:e.value??"",onChange:r=>e.onChange(r.target.value?parseInt(r.target.value):null),placeholder:"Illimité",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"})}),(0,r.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:"Maximum de contacts à effectuer par jour, tous canaux confondus. Laissez vide pour aucune limite."}),(0,r.jsx)(o.FormMessage,{className:"text-red-400"})]})})}),(0,r.jsx)(el,{templates:e,outreachSettings:j??{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1},templateIds:z??{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null},channelCredits:y??{sms:0,whatsapp:0,ringlessVoice:0},onOutreachChange:e=>v.setValue("outreachSettings",e),onTemplateChange:e=>v.setValue("templateIds",e),onChannelCreditsChange:e=>v.setValue("channelCredits",e)}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(a.Button,{type:"button",onClick:()=>h.back(),variant:"outline",className:"flex-1 rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 font-medium text-zinc-300 transition-colors hover:bg-zinc-900",children:"Annuler"}),(0,r.jsx)(a.Button,{type:"submit",disabled:v.formState.isSubmitting,className:"flex-1 rounded-lg bg-amber-500 px-4 py-2 font-medium text-black transition-colors hover:bg-amber-400 disabled:cursor-not-allowed disabled:opacity-50",children:v.formState.isSubmitting?"Création...":t?"Enregistrer":"Créer la recherche"})]})]})})}e.s(["HuntForm",()=>eu],67235)}]);