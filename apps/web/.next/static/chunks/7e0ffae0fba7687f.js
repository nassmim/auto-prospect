(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89536,e=>{"use strict";var t=e.i(4386),s=e.i(17902);function r(){let{isRecording:e,audioUrl:r,error:a,startRecording:l,stopRecording:n,resetRecording:c}=function(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(null),[l,n]=(0,s.useState)(null),c=(0,s.useRef)(null),i=(0,s.useRef)([]),u=(0,s.useRef)(null),d=(0,s.useCallback)(async()=>{n(null),a(null);try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});u.current=e;let s=new MediaRecorder(e);c.current=s,i.current=[],s.ondataavailable=e=>{e.data.size>0&&i.current.push(e.data)},s.onstop=()=>{let e=new Blob(i.current,{type:"audio/webm"}),t=URL.createObjectURL(e);a(t),u.current&&u.current.getTracks().forEach(e=>e.stop())},s.start(),t(!0)}catch(e){n(e instanceof Error?e.message:"Impossible d'accÃ©der au microphone")}},[]),o=(0,s.useCallback)(()=>{c.current&&e&&(c.current.stop(),t(!1))},[e]);return{isRecording:e,audioUrl:r,error:l,startRecording:d,stopRecording:o,resetRecording:(0,s.useCallback)(()=>{a(null),n(null),i.current=[]},[])}}();return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,t.jsx)("h1",{className:"mb-6 text-xl font-semibold text-gray-900",children:"Test Enregistrement Audio"}),(0,t.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6",children:[a&&(0,t.jsx)("div",{className:"mb-4 rounded-lg bg-red-50 p-3 text-sm text-red-700",children:a}),(0,t.jsx)("div",{className:"flex justify-center gap-4",children:e?(0,t.jsxs)("button",{onClick:n,className:"flex items-center gap-2 rounded-lg bg-gray-900 px-6 py-3 font-medium text-white hover:bg-gray-800",children:[(0,t.jsx)("span",{className:"h-3 w-3 bg-white"}),"Stop"]}):(0,t.jsxs)("button",{onClick:l,className:"flex items-center gap-2 rounded-lg bg-red-600 px-6 py-3 font-medium text-white hover:bg-red-700",children:[(0,t.jsx)("span",{className:"h-3 w-3 rounded-full bg-white"}),"Enregistrer"]})}),e&&(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-2 text-red-600",children:[(0,t.jsx)("span",{className:"h-2 w-2 animate-pulse rounded-full bg-red-600"}),"Enregistrement en cours..."]}),r&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Lecture :"}),(0,t.jsx)("button",{onClick:c,className:"text-sm text-gray-500 hover:text-gray-700",children:"Supprimer"})]}),(0,t.jsx)("audio",{controls:!0,src:r,className:"w-full"})]})]})]})})}e.s(["default",()=>r],89536)}]);