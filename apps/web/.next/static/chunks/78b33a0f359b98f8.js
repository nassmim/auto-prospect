(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22627,e=>{"use strict";var s=e.i(4386),t=e.i(54033),r=e.i(67713),n=e.i(17902);function i({initialHasApiKey:e,smsApiAllowed:i}){let[a,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(e),[o,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),f=async()=>{m(!0),u(null),p(!1);let e=await (0,t.saveSmsApiKeyAction)({apiKey:a.trim()});e.success?(d(!0),l(""),p(!0),setTimeout(()=>p(!1),5e3)):u(e.errorCode?(0,r.getErrorMessage)(e.errorCode):"Erreur lors de la sauvegarde"),m(!1)};return(0,s.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,s.jsx)("div",{className:"mb-6 flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-500/10",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"SMS Mobile API"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Envoie des SMS depuis ton tÃ©lÃ©phone"}),(0,s.jsx)("div",{className:"mt-2 flex items-center gap-2",children:c?(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-green-500/10 px-2 py-0.5 text-xs text-green-500",children:[(0,s.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-green-500"}),"ConnectÃ©"]}):(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-zinc-800 px-2 py-0.5 text-xs text-zinc-400",children:[(0,s.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-zinc-600"}),"Non configurÃ©"]})})]})]})}),!i&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-zinc-400",children:"Pour accÃ©der Ã  la configuration SMS, contactez-nous pour activer cette fonctionnalitÃ© sur votre compte."}),(0,s.jsx)("button",{onClick:()=>{console.log("Contact button clicked - email alert to be implemented")},className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400",children:"Nous contacter"})]}),i&&(0,s.jsxs)(s.Fragment,{children:[x&&(0,s.jsx)("div",{className:"mb-4 rounded-lg border border-red-500/20 bg-red-500/10 p-3 text-sm text-red-400",children:x}),h&&(0,s.jsx)("div",{className:"mb-4 rounded-lg border border-green-500/20 bg-green-500/10 p-3 text-sm text-green-400",children:c?"ClÃ© API mise Ã  jour avec succÃ¨s":"ClÃ© API enregistrÃ©e avec succÃ¨s"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:`flex h-7 w-7 items-center justify-center rounded-full text-xs font-semibold ${c?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"}`,children:c?"âœ“":"1"}),(0,s.jsx)("h4",{className:"text-sm font-medium text-zinc-200",children:"ClÃ© API SMS Mobile"})]}),(0,s.jsxs)("div",{className:"ml-10 space-y-3",children:[c&&(0,s.jsx)("div",{className:"mb-3 rounded-lg border border-blue-500/20 bg-blue-500/10 p-3",children:(0,s.jsxs)("p",{className:"text-xs text-blue-400",children:[(0,s.jsx)("strong",{className:"text-blue-300",children:"ClÃ© API dÃ©jÃ  configurÃ©e"}),(0,s.jsx)("br",{}),"Tu peux mettre Ã  jour ta clÃ© API en entrant une nouvelle clÃ© ci-dessous."]})}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"password",value:a,onChange:e=>l(e.target.value),placeholder:"Entre ta clÃ© API SMS Mobile",className:"flex-1 rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-2 text-sm text-zinc-100 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"}),(0,s.jsx)("button",{onClick:f,disabled:o||!a.trim(),className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:o?"...":c?"Mettre Ã  jour":"Connecter"})]})]})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-zinc-800/50 p-4",children:[(0,s.jsx)("h5",{className:"mb-3 text-xs font-semibold text-zinc-300",children:"Comment obtenir ta clÃ© API ?"}),(0,s.jsxs)("div",{className:"space-y-3 text-xs text-zinc-400",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-1.5 font-medium text-zinc-300",children:"ðŸ“± Via application Android :"}),(0,s.jsxs)("ol",{className:"ml-4 list-decimal space-y-1",children:[(0,s.jsx)("li",{children:"Ouvre l'application SMS Mobile"}),(0,s.jsxs)("li",{children:["Va dans ",(0,s.jsx)("span",{className:"text-zinc-300",children:"Help Center"})," â†’"," ",(0,s.jsx)("span",{className:"text-zinc-300",children:"API Key"})]}),(0,s.jsx)("li",{children:"Copie ta clÃ© API et colle-la ci-dessus"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-1.5 font-medium text-zinc-300",children:"ðŸ’» Via ordinateur :"}),(0,s.jsxs)("ol",{className:"ml-4 list-decimal space-y-1",children:[(0,s.jsx)("li",{children:"Connecte-toi sur le site SMS Mobile API"}),(0,s.jsxs)("li",{children:["Va dans ",(0,s.jsx)("span",{className:"text-zinc-300",children:"Dashboard"})," â†’"," ",(0,s.jsx)("span",{className:"text-zinc-300",children:"My API Key"})]}),(0,s.jsx)("li",{children:"Copie ta clÃ© API et colle-la ci-dessus"})]})]})]})]})]})]})}e.s(["SmsConnectionCard",()=>i])},14378,e=>{"use strict";var s=e.i(4386),t=e.i(18951),r=e.i(68154),n=e.i(67713),i=e.i(41074),a=e.i(17902);function l({accountId:e,initialPhoneNumber:l,initialIsConnected:c}){let[d,o]=(0,a.useState)(null),[m,x]=(0,a.useState)(l||""),[u,h]=(0,a.useState)(l),[p,f]=(0,a.useState)(!1),[b,g]=(0,a.useState)(null),[j,v]=(0,a.useState)(c),[N,z]=(0,a.useState)(!1),y=async()=>{f(!0),o(null);let s=await (0,r.updateWhatsAppPhoneNumber)(e,m);s.success?(h(s.formattedNumber),x(s.formattedNumber),v(!1),g(null)):o(s.errorCode?(0,n.getErrorMessage)(s.errorCode):"Erreur lors de la sauvegarde"),f(!1)},k=async()=>{z(!0),o(null),g(null);let s=await (0,t.initiateWhatsAppConnection)(e);s.success?s.qrCode?g(s.qrCode):v(!0):o(s.errorCode?(0,n.getErrorMessage)(s.errorCode):"Erreur de connexion WhatsApp"),z(!1)};return(0,s.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,s.jsx)("div",{className:"mb-6 flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-500/10",children:(0,s.jsx)("svg",{className:"h-6 w-6 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"WhatsApp"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"IntÃ©gration directe WhatsApp"}),(0,s.jsx)("div",{className:"mt-2 flex items-center gap-2",children:j?(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-green-500/10 px-2 py-0.5 text-xs text-green-500",children:[(0,s.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-green-500"}),"ConnectÃ©"]}):u?(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-amber-500/10 px-2 py-0.5 text-xs text-amber-500",children:[(0,s.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-amber-500"}),"NumÃ©ro enregistrÃ©"]}):(0,s.jsxs)("span",{className:"inline-flex items-center rounded-full bg-zinc-800 px-2 py-0.5 text-xs text-zinc-400",children:[(0,s.jsx)("span",{className:"mr-1.5 h-2 w-2 rounded-full bg-zinc-600"}),"Non configurÃ©"]})})]})]})}),d&&(0,s.jsx)("div",{className:"mb-4 rounded-lg border border-red-500/20 bg-red-500/10 p-3 text-sm text-red-400",children:d}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:`flex h-7 w-7 items-center justify-center rounded-full text-xs font-semibold ${u?"bg-green-500/20 text-green-400":"bg-amber-500/20 text-amber-400"}`,children:u?"âœ“":"1"}),(0,s.jsx)("h4",{className:"text-sm font-medium text-zinc-200",children:"NumÃ©ro WhatsApp"})]}),(0,s.jsxs)("div",{className:"ml-10 space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"tel",value:m,onChange:e=>x(e.target.value),placeholder:"+33 6 12 34 56 78",className:"flex-1 rounded-lg border border-zinc-700 bg-zinc-800/50 px-4 py-2 text-sm text-zinc-100 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"}),(0,s.jsx)("button",{onClick:y,disabled:p||!m,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:p?"...":u?"Modifier":"Enregistrer"})]}),u&&(0,s.jsxs)("p",{className:"text-xs text-green-400",children:["âœ“ NumÃ©ro enregistrÃ© : ",u]})]})]}),(0,s.jsxs)("div",{className:`mb-6 ${!u?"opacity-40":""}`,"aria-disabled":!u,children:[(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,s.jsx)("div",{className:`flex h-7 w-7 items-center justify-center rounded-full text-xs font-semibold ${j?"bg-green-500/20 text-green-400":u?"bg-amber-500/20 text-amber-400":"bg-zinc-800 text-zinc-600"}`,children:j?"âœ“":"2"}),(0,s.jsx)("h4",{className:"text-sm font-medium text-zinc-200",children:"Connexion WhatsApp"})]}),(0,s.jsx)("div",{className:"ml-10",children:j?(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-green-500/10 px-4 py-3",children:[(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-400",children:"WhatsApp connectÃ©"})]}):u?(0,s.jsx)(s.Fragment,{children:b?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"mb-4 text-xs text-zinc-400",children:"Scannez ce code avec WhatsApp sur votre tÃ©lÃ©phone"}),(0,s.jsx)("div",{className:"inline-block rounded-lg border-2 border-green-500 p-3",children:(0,s.jsx)(i.default,{src:b,alt:"QR Code WhatsApp",width:200,height:200,className:"h-48 w-48"})}),(0,s.jsx)("p",{className:"mt-3 text-xs text-zinc-500",children:"WhatsApp â†’ ParamÃ¨tres â†’ Appareils connectÃ©s â†’ Connecter"})]}):(0,s.jsx)("button",{onClick:k,disabled:N,className:"flex w-full items-center justify-center gap-2 rounded-lg bg-green-600 py-2.5 text-sm font-medium text-white transition-colors hover:bg-green-700 disabled:opacity-50",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"GÃ©nÃ©ration du QR code..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Connecter WhatsApp"]})})}):(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:"Enregistrez d'abord votre numÃ©ro WhatsApp"})})]}),(0,s.jsx)("div",{className:"rounded-lg bg-zinc-800/50 p-4",children:(0,s.jsxs)("p",{className:"text-xs text-zinc-400",children:[(0,s.jsx)("strong",{className:"text-zinc-300",children:"Configuration:"})," Enregistrez votre numÃ©ro WhatsApp, puis connectez-vous en scannant le QR code avec votre tÃ©lÃ©phone. La connexion reste active pour l'envoi de messages automatiques."]})})]})}e.s(["WhatsAppConnectionCard",()=>l])},3364,e=>{"use strict";var s=e.i(4386),t=e.i(57080);let r=(0,t.createServerReference)("403f72ba9aa3a2227bcbf16b84d0e423632a64628e",t.callServer,void 0,t.findSourceMapURL,"updateAccountSettings");var n=e.i(17902);function i({settings:e}){let[t,i]=(0,n.useTransition)(),[a,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"Filtres de recherche"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Configurez les filtres appliquÃ©s automatiquement Ã  vos recherches"})]}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"Refus des professionnels"}),(0,s.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:o,onChange:e=>m(e.target.checked),className:"peer sr-only"}),(0,s.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-zinc-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-zinc-400 after:transition-all after:content-[''] peer-checked:bg-amber-500 peer-checked:after:translate-x-full peer-checked:after:bg-zinc-950 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 peer-focus:ring-offset-2 peer-focus:ring-offset-zinc-950"})]})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-zinc-500",children:"Filtre automatiquement les annonces contenant des termes indiquant un vendeur professionnel"}),(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-zinc-400",children:"Exemples de termes filtrÃ©s:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["pas d'agence","particulier seulement","sans garage","vente directe","propriÃ©taire"].map(e=>(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-zinc-800 px-3 py-1 text-xs text-zinc-400",children:e},e))})]})]})})}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/30 p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("svg",{className:"h-5 w-5 flex-shrink-0 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-zinc-300",children:"Ã€ propos des filtres"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Les filtres sont appliquÃ©s en temps rÃ©el lors de la recherche d'annonces. Ils permettent de cibler uniquement les vendeurs particuliers et d'Ã©viter les professionnels."})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>{l(null),d(!1),i(async()=>{try{await r({}),d(!0),setTimeout(()=>d(!1),3e3)}catch(e){l(e instanceof Error?e.message:"Une erreur est survenue")}})},disabled:t,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:t?"Enregistrement...":"Enregistrer"}),c&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"ParamÃ¨tres enregistrÃ©s"]}),a&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a]})]})]})}function a({settings:e}){let[t,i]=(0,n.useTransition)(),[a,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1),[o,m]=(0,n.useState)(e?.dailyReset??!1),[x,u]=(0,n.useState)(e?.ignorePhonesVisible??!1);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"ParamÃ¨tres des messages"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Configurez le comportement de l'envoi automatique de messages"})]}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-500/10",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"RÃ©initialisation quotidienne"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"RÃ©initialise les compteurs de messages Ã  minuit chaque jour"})]}),(0,s.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:o,onChange:e=>m(e.target.checked),className:"peer sr-only"}),(0,s.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-zinc-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-zinc-400 after:transition-all after:content-[''] peer-checked:bg-amber-500 peer-checked:after:translate-x-full peer-checked:after:bg-zinc-950 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 peer-focus:ring-offset-2 peer-focus:ring-offset-zinc-950"})]})]}),(0,s.jsx)("div",{className:"mt-4 rounded-lg bg-zinc-800/50 p-3",children:(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:"Lorsque activÃ©e, cette option permet de respecter les limites quotidiennes d'envoi de messages imposÃ©es par les plateformes (Leboncoin, WhatsApp, etc.)"})})]})})}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-500/10",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"Ignorer les annonces avec tÃ©lÃ©phone visible"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Ne pas envoyer de messages automatiques aux annonces qui affichent dÃ©jÃ  un numÃ©ro de tÃ©lÃ©phone"})]}),(0,s.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:x,onChange:e=>u(e.target.checked),className:"peer sr-only"}),(0,s.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-zinc-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-zinc-400 after:transition-all after:content-[''] peer-checked:bg-amber-500 peer-checked:after:translate-x-full peer-checked:after:bg-zinc-950 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 peer-focus:ring-offset-2 peer-focus:ring-offset-zinc-950"})]})]}),(0,s.jsx)("div",{className:"mt-4 rounded-lg bg-zinc-800/50 p-3",children:(0,s.jsx)("p",{className:"text-xs text-zinc-400",children:"RecommandÃ© pour Ã©viter les messages redondants. Si le vendeur affiche dÃ©jÃ  son numÃ©ro, vous pouvez le contacter directement sans passer par la messagerie automatique."})})]})})}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/30 p-4",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("svg",{className:"h-5 w-5 flex-shrink-0 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-zinc-300",children:"Bonnes pratiques"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-zinc-500",children:[(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-zinc-600"}),(0,s.jsx)("span",{children:"Respectez les limites d'envoi pour Ã©viter d'Ãªtre bloquÃ©"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-zinc-600"}),(0,s.jsx)("span",{children:"Personnalisez vos templates de messages pour de meilleurs rÃ©sultats"})]}),(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-zinc-600"}),(0,s.jsx)("span",{children:"VÃ©rifiez rÃ©guliÃ¨rement vos paramÃ¨tres de connexion"})]})]})]})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>{l(null),d(!1),i(async()=>{try{await r({dailyReset:o,ignorePhonesVisible:x}),d(!0),setTimeout(()=>d(!1),3e3)}catch(e){l(e instanceof Error?e.message:"Une erreur est survenue")}})},disabled:t,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:t?"Enregistrement...":"Enregistrer"}),c&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"ParamÃ¨tres enregistrÃ©s"]}),a&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),a]})]})]})}let l=(0,t.createServerReference)("40db341e5c7da6aeadb49bea3f1636f22d05eb9866",t.callServer,void 0,t.findSourceMapURL,"addTeamMember"),c=(0,t.createServerReference)("405932f23d5db126e99894c03f256161cca36755f1",t.callServer,void 0,t.findSourceMapURL,"removeTeamMember");function d({account:e,userRole:t,initialMembers:i}){let[a,d]=(0,n.useTransition)(),[o,m]=(0,n.useState)(null),[x,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(e.name||""),[f,b]=(0,n.useState)(e.settings?.allowReassignment??!0),[g,j]=(0,n.useState)(e.settings?.restrictVisibility??!1),[v,N]=(0,n.useState)(""),[z,y]=(0,n.useState)("user"),[k,w]=(0,n.useState)(i),C="owner"===t||"admin"===t,M="owner"===t;return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"Organisation"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Informations gÃ©nÃ©rales de votre organisation"})]}),(0,s.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,s.jsx)("label",{htmlFor:"org-name",className:"block text-sm font-medium text-zinc-300",children:"Nom de l'organisation"}),(0,s.jsxs)("div",{className:"mt-2 flex gap-3",children:[(0,s.jsx)("input",{id:"org-name",type:"text",value:h,onChange:e=>p(e.target.value),disabled:!M||a,className:"flex-1 rounded-lg border border-zinc-800 bg-zinc-900 px-4 py-2 text-sm text-zinc-100 placeholder-zinc-600 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 disabled:opacity-50"}),M&&(0,s.jsx)("button",{onClick:()=>{M&&(m(null),u(null),d(async()=>{try{u("Nom de l'organisation mis Ã  jour"),setTimeout(()=>u(null),3e3)}catch(e){m(e instanceof Error?e.message:"Une erreur est survenue")}}))},disabled:a||h===e.name,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:"Enregistrer"})]}),!M&&(0,s.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Seul le propriÃ©taire peut modifier le nom de l'organisation"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"ParamÃ¨tres d'Ã©quipe"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Configurez les permissions et la visibilitÃ©"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"Autoriser la rÃ©assignation"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Les membres peuvent rÃ©assigner des leads Ã  d'autres membres"})]}),(0,s.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked),disabled:!C||a,className:"peer sr-only"}),(0,s.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-zinc-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-zinc-400 after:transition-all after:content-[''] peer-checked:bg-amber-500 peer-checked:after:translate-x-full peer-checked:after:bg-zinc-950 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 peer-focus:ring-offset-2 peer-focus:ring-offset-zinc-950 peer-disabled:opacity-50"})]})]})}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-zinc-100",children:"Restreindre la visibilitÃ©"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Les membres ne voient que leurs propres leads"})]}),(0,s.jsxs)("label",{className:"relative inline-flex cursor-pointer items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),disabled:!C||a,className:"peer sr-only"}),(0,s.jsx)("div",{className:"peer h-6 w-11 rounded-full bg-zinc-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:bg-zinc-400 after:transition-all after:content-[''] peer-checked:bg-amber-500 peer-checked:after:translate-x-full peer-checked:after:bg-zinc-950 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-amber-500 peer-focus:ring-offset-2 peer-focus:ring-offset-zinc-950 peer-disabled:opacity-50"})]})]})}),C&&(0,s.jsx)("button",{onClick:()=>{C&&(m(null),u(null),d(async()=>{try{await r({allowReassignment:f,restrictVisibility:g}),u("ParamÃ¨tres mis Ã  jour"),setTimeout(()=>u(null),3e3)}catch(e){m(e instanceof Error?e.message:"Une erreur est survenue")}}))},disabled:a,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:a?"Enregistrement...":"Enregistrer les paramÃ¨tres"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"Membres de l'Ã©quipe"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"GÃ©rez les membres et leurs rÃ´les"})]}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-zinc-900 border-b border-zinc-800",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-400 uppercase tracking-wider",children:"Membre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-400 uppercase tracking-wider",children:"RÃ´le"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-zinc-400 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-zinc-800",children:k.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-zinc-100",children:e.account?.name||e.name}),(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:e.account?.email})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex rounded-full px-2 py-1 text-xs font-medium bg-zinc-700 text-zinc-300",children:"Membre"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:C&&(0,s.jsx)("button",{onClick:()=>{var s;return s=e.id,void(!C||confirm("ÃŠtes-vous sÃ»r de vouloir retirer ce membre ?")&&(m(null),d(async()=>{try{await c(s),w(k.filter(e=>e.id!==s)),u("Membre retirÃ©"),setTimeout(()=>u(null),3e3)}catch(e){m(e instanceof Error?e.message:"Une erreur est survenue")}})))},disabled:a,className:"text-sm text-red-500 hover:text-red-400 disabled:opacity-50",children:"Retirer"})})]},e.id))})]})})]}),C&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-zinc-100",children:"Inviter un membre"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Envoyez une invitation par email"})]}),(0,s.jsx)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("input",{type:"email",placeholder:"email@exemple.com",value:v,onChange:e=>N(e.target.value),disabled:a,className:"flex-1 rounded-lg border border-zinc-800 bg-zinc-900 px-4 py-2 text-sm text-zinc-100 placeholder-zinc-600 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 disabled:opacity-50"}),(0,s.jsxs)("select",{value:z,onChange:e=>y(e.target.value),disabled:a,className:"rounded-lg border border-zinc-800 bg-zinc-900 px-4 py-2 text-sm text-zinc-100 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500 disabled:opacity-50",children:[(0,s.jsx)("option",{value:"user",children:"Utilisateur"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]}),(0,s.jsx)("button",{onClick:()=>{C&&(m(null),u(null),d(async()=>{try{await l(v),N(""),u("Invitation envoyÃ©e"),setTimeout(()=>u(null),3e3)}catch(e){m(e instanceof Error?e.message:"Une erreur est survenue")}}))},disabled:a||!v,className:"rounded-lg bg-amber-500 px-4 py-2 text-sm font-medium text-zinc-950 transition-colors hover:bg-amber-400 disabled:opacity-50",children:"Inviter"})]})})]}),(x||o)&&(0,s.jsxs)("div",{className:"mt-4",children:[x&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),x]}),o&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o]})]})]})}function o({account:e,userRole:t,initialMembers:r,connectedAccountsTab:l}){let[c,o]=(0,n.useState)("accounts"),m=[{id:"accounts",label:"Comptes connectÃ©s",icon:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})},{id:"filters",label:"Filtres",icon:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})},{id:"messages",label:"Messages",icon:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})},{id:"team",label:"Ã‰quipe",icon:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-zinc-100",children:"ParamÃ¨tres"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"GÃ©rez vos paramÃ¨tres et votre Ã©quipe"})]}),(0,s.jsx)("div",{className:"border-b border-zinc-800",children:(0,s.jsx)("nav",{className:"-mb-px flex gap-6",children:m.map(e=>(0,s.jsxs)("button",{onClick:()=>o(e.id),className:`flex items-center gap-2 border-b-2 px-1 py-4 text-sm font-medium transition-colors ${c===e.id?"border-amber-500 text-amber-500":"border-transparent text-zinc-500 hover:border-zinc-700 hover:text-zinc-300"}`,children:[e.icon,e.label]},e.id))})}),(0,s.jsxs)("div",{className:"py-6",children:["accounts"===c&&l,"filters"===c&&(0,s.jsx)(i,{settings:e.settings}),"messages"===c&&(0,s.jsx)(a,{settings:e.settings}),"team"===c&&(0,s.jsx)(d,{account:e,userRole:t,initialMembers:r})]})]})}e.s(["SettingsPageClient",()=>o],3364)}]);