{"version":3,"sources":["../../../../../../../../../../Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/components/settings/sms-connection-card.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../../../Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/components/settings/whatsapp-connection-card.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../../../Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/app/dashboard/settings/settings-page-client.tsx/__nextjs-internal-proxy.mjs","../../../../../../../../../../Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/components/settings/connected-accounts-tab.tsx","../../../../../../../../../../Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/app/dashboard/settings/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SmsConnectionCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call SmsConnectionCard() from the server but SmsConnectionCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/components/settings/sms-connection-card.tsx\",\n    \"SmsConnectionCard\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const WhatsAppConnectionCard = registerClientReference(\n    function() { throw new Error(\"Attempted to call WhatsAppConnectionCard() from the server but WhatsAppConnectionCard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/components/settings/whatsapp-connection-card.tsx\",\n    \"WhatsAppConnectionCard\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const SettingsPageClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call SettingsPageClient() from the server but SettingsPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Projets/auto-prospect-worktrees/config/mono-repo/apps/web/src/app/dashboard/settings/settings-page-client.tsx\",\n    \"SettingsPageClient\",\n);\n","import { SmsConnectionCard } from \"./sms-connection-card\";\nimport { WhatsAppConnectionCard } from \"./whatsapp-connection-card\";\n\ntype ConnectedAccountsTabProps = {\n  accountId: string;\n  whatsappPhoneNumber: string | null;\n  whatsappConnected: boolean;\n  smsApiKeyConfigured: boolean;\n  smsApiAllowed: boolean;\n};\n\n/**\n * Connected Accounts Tab\n * Manages integrations with Leboncoin, WhatsApp, and SMS API\n */\nexport function ConnectedAccountsTab({\n  accountId,\n  whatsappPhoneNumber,\n  whatsappConnected,\n  smsApiKeyConfigured,\n  smsApiAllowed,\n}: ConnectedAccountsTabProps) {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-lg font-semibold text-zinc-100\">\n          Comptes connectés\n        </h2>\n        <p className=\"mt-1 text-sm text-zinc-500\">\n          Gérez vos connexions aux plateformes d&apos;envoi de messages\n        </p>\n      </div>\n\n      {/* Leboncoin Connection */}\n      <div className=\"rounded-lg border border-zinc-800 bg-zinc-900/50 p-6\">\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex h-12 w-12 items-center justify-center rounded-lg bg-orange-500/10\">\n              <svg\n                className=\"h-6 w-6 text-orange-500\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z\" />\n              </svg>\n            </div>\n            <div>\n              <h3 className=\"text-sm font-medium text-zinc-100\">Leboncoin</h3>\n              <p className=\"mt-1 text-xs text-zinc-500\">\n                Extension Chrome pour l&apos;envoi de messages\n              </p>\n              <div className=\"mt-2 flex items-center gap-2\">\n                <span className=\"inline-flex items-center rounded-full bg-zinc-800 px-2 py-0.5 text-xs text-zinc-400\">\n                  <span className=\"mr-1.5 h-2 w-2 rounded-full bg-zinc-600\" />\n                  Non connecté\n                </span>\n              </div>\n            </div>\n          </div>\n          <a\n            href=\"https://chrome.google.com/webstore\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"rounded-lg bg-zinc-800 px-4 py-2 text-sm font-medium text-zinc-100 transition-colors hover:bg-zinc-700\"\n          >\n            Installer l&apos;extension\n          </a>\n        </div>\n        <div className=\"mt-4 rounded-lg bg-zinc-800/50 p-4\">\n          <p className=\"text-xs text-zinc-400\">\n            <strong className=\"text-zinc-300\">Note:</strong> Installez\n            l&apos;extension Chrome pour connecter votre compte Leboncoin et\n            envoyer des messages automatiquement.\n          </p>\n        </div>\n      </div>\n\n      {/* WhatsApp Connection */}\n      <WhatsAppConnectionCard\n        accountId={accountId}\n        initialPhoneNumber={whatsappPhoneNumber}\n        initialIsConnected={whatsappConnected}\n      />\n\n      {/* SMS API Connection */}\n      <SmsConnectionCard\n        initialHasApiKey={smsApiKeyConfigured}\n        smsApiAllowed={smsApiAllowed}\n      />\n    </div>\n  );\n}\n","import { ConnectedAccountsTab } from \"@/components/settings/connected-accounts-tab\";\nimport { createDrizzleSupabaseClient } from \"@/lib/drizzle/dbClient\";\nimport { getUserAccount } from \"@/services/account.service\";\nimport { getTeamMembers } from \"@/services/team.service\";\nimport { isWhatsAppConnected } from \"@/services/whatsapp.service\";\nimport { SettingsPageClient } from \"./settings-page-client\";\n\nexport default async function SettingsPage() {\n  const dbClient = await createDrizzleSupabaseClient();\n\n  // Fetch initial data for settings page\n  const [account, members] = await Promise.all([\n    getUserAccount(dbClient),\n    getTeamMembers(dbClient),\n  ]);\n\n  // Get connection statuses (depends on account)\n  const whatsappConnected = await isWhatsAppConnected(account.id, { dbClient });\n\n  const { smsApiKey, smsMobileAPiAllowed: smsApiAllowed } = account;\n  const smsApiKeyConfigured = !!smsApiKey;\n\n  return (\n    <SettingsPageClient\n      account={account}\n      userRole={\"owner\"}\n      initialMembers={members}\n      connectedAccountsTab={\n        <ConnectedAccountsTab\n          accountId={account.id}\n          whatsappPhoneNumber={account.whatsappPhoneNumber}\n          whatsappConnected={whatsappConnected}\n          smsApiKeyConfigured={smsApiKeyConfigured}\n          smsApiAllowed={smsApiAllowed}\n        />\n      }\n    />\n  );\n}\n"],"names":[],"mappings":"qbAEO,IAAM,EAAoB,CAAA,EAAA,AADjC,EAAA,CAAA,CAAA,OACiC,uBAAA,AAAuB,EACpD,WAAa,MAAM,AAAI,MAAM,gPAAkP,EAC/Q,0IACA,6EAHG,IAAM,EAAoB,CAAA,EADjC,AACiC,EADjC,CAAA,CAAA,OACiC,uBAAA,AAAuB,EACpD,WAAa,MAAU,AAAJ,MAAU,gPAAkP,EAC/Q,sHACA,6ICHG,IAAM,EAAyB,CAAA,EADtC,AACsC,EADtC,CAAA,CAAA,OACsC,uBAAuB,AAAvB,EAClC,WAAa,MAAM,AAAI,MAAM,0PAA4P,EACzR,+IACA,wFAHG,IAAM,EAAyB,CAAA,EADtC,AACsC,EADtC,CAAA,CAAA,OACsC,uBAAA,AAAuB,EACzD,WAAa,MAAM,AAAI,MAAM,0PAA4P,EACzR,2HACA,+ICHG,IAAM,EAAqB,CAAA,EADlC,AACkC,EADlC,CAAA,CAAA,OACkC,uBAAA,AAAuB,EACrD,WAAa,MAAM,AAAI,MAAM,kPAAoP,EACjR,8IACA,gFAHG,IAAM,EAAqB,CAAA,EADlC,AACkC,EADlC,CAAA,CAAA,OACkC,uBAAA,AAAuB,EACrD,WAAa,MAAM,AAAI,MAAM,kPAAoP,EACjR,0HACA,mHCLJ,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA","ignoreList":[0,1,2]}