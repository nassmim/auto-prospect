module.exports=[79538,a=>{"use strict";var b=a.i(84955),c=a.i(89986);let d=(0,c.createServerReference)("40bc40327414d65c149623d29751f6236173c3d9aa",c.callServer,void 0,c.findSourceMapURL,"createHunt"),e=(0,c.createServerReference)("60611e6860255adc0799d2db64bb54465f1f907a39",c.callServer,void 0,c.findSourceMapURL,"updateHunt");var f=a.i(98376),g=a.i(42906),h=a.i(32753),i=a.i(42220),j=a.i(97701),k=a.i(4882),l=a.i(51448),m=a.i(71650),n=a.i(92995),o=a.i(7557),p=a.i(46867),q=a.i(39664),r=a.i(87154),s=a.i(81675),t="rovingFocusGroup.onEntryFocus",u={bubbles:!1,cancelable:!0},v="RovingFocusGroup",[w,x,y]=(0,m.createCollection)(v),[z,A]=(0,l.createContextScope)(v,[y]),[B,C]=z(v),D=j.forwardRef((a,c)=>(0,b.jsx)(w.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(w.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,b.jsx)(E,{...a,ref:c})})}));D.displayName=v;var E=j.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,orientation:e,loop:f=!1,dir:g,currentTabStopId:h,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:m,preventScrollOnEntryFocus:o=!1,...w}=a,y=j.useRef(null),z=(0,n.useComposedRefs)(c,y),A=(0,s.useDirection)(g),[C,D]=(0,r.useControllableState)({prop:h,defaultProp:i??null,onChange:l,caller:v}),[E,F]=j.useState(!1),G=(0,q.useCallbackRef)(m),H=x(d),J=j.useRef(!1),[K,L]=j.useState(0);return j.useEffect(()=>{let a=y.current;if(a)return a.addEventListener(t,G),()=>a.removeEventListener(t,G)},[G]),(0,b.jsx)(B,{scope:d,orientation:e,dir:A,loop:f,currentTabStopId:C,onItemFocus:j.useCallback(a=>D(a),[D]),onItemShiftTab:j.useCallback(()=>F(!0),[]),onFocusableItemAdd:j.useCallback(()=>L(a=>a+1),[]),onFocusableItemRemove:j.useCallback(()=>L(a=>a-1),[]),children:(0,b.jsx)(p.Primitive.div,{tabIndex:E||0===K?-1:0,"data-orientation":e,...w,ref:z,style:{outline:"none",...a.style},onMouseDown:(0,k.composeEventHandlers)(a.onMouseDown,()=>{J.current=!0}),onFocus:(0,k.composeEventHandlers)(a.onFocus,a=>{let b=!J.current;if(a.target===a.currentTarget&&b&&!E){let b=new CustomEvent(t,u);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=H().filter(a=>a.focusable);I([a.find(a=>a.active),a.find(a=>a.id===C),...a].filter(Boolean).map(a=>a.ref.current),o)}}J.current=!1}),onBlur:(0,k.composeEventHandlers)(a.onBlur,()=>F(!1))})})}),F="RovingFocusGroupItem",G=j.forwardRef((a,c)=>{let{__scopeRovingFocusGroup:d,focusable:e=!0,active:f=!1,tabStopId:g,children:h,...i}=a,l=(0,o.useId)(),m=g||l,n=C(F,d),q=n.currentTabStopId===m,r=x(d),{onFocusableItemAdd:s,onFocusableItemRemove:t,currentTabStopId:u}=n;return j.useEffect(()=>{if(e)return s(),()=>t()},[e,s,t]),(0,b.jsx)(w.ItemSlot,{scope:d,id:m,focusable:e,active:f,children:(0,b.jsx)(p.Primitive.span,{tabIndex:q?0:-1,"data-orientation":n.orientation,...i,ref:c,onMouseDown:(0,k.composeEventHandlers)(a.onMouseDown,a=>{e?n.onItemFocus(m):a.preventDefault()}),onFocus:(0,k.composeEventHandlers)(a.onFocus,()=>n.onItemFocus(m)),onKeyDown:(0,k.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void n.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return H[e]}(a,n.orientation,n.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=r().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=n.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>I(e))}}),children:"function"==typeof h?h({isCurrentTabStop:q,hasTabStop:null!=u}):h})})});G.displayName=F;var H={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function I(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var J=a.i(60346),K="Tabs",[L,M]=(0,l.createContextScope)(K,[A]),N=A(),[O,P]=L(K),Q=j.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,onValueChange:f,defaultValue:g,orientation:h="horizontal",dir:i,activationMode:j="automatic",...k}=a,l=(0,s.useDirection)(i),[m,n]=(0,r.useControllableState)({prop:e,onChange:f,defaultProp:g??"",caller:K});return(0,b.jsx)(O,{scope:d,baseId:(0,o.useId)(),value:m,onValueChange:n,orientation:h,dir:l,activationMode:j,children:(0,b.jsx)(p.Primitive.div,{dir:l,"data-orientation":h,...k,ref:c})})});Q.displayName=K;var R="TabsList",S=j.forwardRef((a,c)=>{let{__scopeTabs:d,loop:e=!0,...f}=a,g=P(R,d),h=N(d);return(0,b.jsx)(D,{asChild:!0,...h,orientation:g.orientation,dir:g.dir,loop:e,children:(0,b.jsx)(p.Primitive.div,{role:"tablist","aria-orientation":g.orientation,...f,ref:c})})});S.displayName=R;var T="TabsTrigger",U=j.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,disabled:f=!1,...g}=a,h=P(T,d),i=N(d),j=X(h.baseId,e),l=Y(h.baseId,e),m=e===h.value;return(0,b.jsx)(G,{asChild:!0,...i,focusable:!f,active:m,children:(0,b.jsx)(p.Primitive.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":l,"data-state":m?"active":"inactive","data-disabled":f?"":void 0,disabled:f,id:j,...g,ref:c,onMouseDown:(0,k.composeEventHandlers)(a.onMouseDown,a=>{f||0!==a.button||!1!==a.ctrlKey?a.preventDefault():h.onValueChange(e)}),onKeyDown:(0,k.composeEventHandlers)(a.onKeyDown,a=>{[" ","Enter"].includes(a.key)&&h.onValueChange(e)}),onFocus:(0,k.composeEventHandlers)(a.onFocus,()=>{let a="manual"!==h.activationMode;m||f||!a||h.onValueChange(e)})})})});U.displayName=T;var V="TabsContent",W=j.forwardRef((a,c)=>{let{__scopeTabs:d,value:e,forceMount:f,children:g,...h}=a,i=P(V,d),k=X(i.baseId,e),l=Y(i.baseId,e),m=e===i.value,n=j.useRef(m);return j.useEffect(()=>{let a=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,b.jsx)(J.Presence,{present:f||m,children:({present:d})=>(0,b.jsx)(p.Primitive.div,{"data-state":m?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":k,hidden:!d,id:l,tabIndex:0,...h,ref:c,style:{...a.style,animationDuration:n.current?"0s":void 0},children:d&&g})})});function X(a,b){return`${a}-trigger-${b}`}function Y(a,b){return`${a}-content-${b}`}W.displayName=V;var Z=a.i(97828);function $({className:a,...c}){return(0,b.jsx)(Q,{"data-slot":"tabs",className:(0,Z.cn)("flex flex-col gap-2",a),...c})}function _({className:a,...c}){return(0,b.jsx)(S,{"data-slot":"tabs-list",className:(0,Z.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...c})}function aa({className:a,...c}){return(0,b.jsx)(U,{"data-slot":"tabs-trigger",className:(0,Z.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...c})}function ab({className:a,...c}){return(0,b.jsx)(W,{"data-slot":"tabs-content",className:(0,Z.cn)("flex-1 outline-none",a),...c})}var ac=a.i(21440);a.i(76266);var ad=a.i(83319),ae=a.i(59325),af=a.i(73248),ag=a.i(1157),ah=a.i(46845);function ai({templates:a,outreachSettings:c,templateIds:d,channelCredits:e,onOutreachChange:f,onTemplateChange:g,onChannelCreditsChange:h}){let i=[{key:"leboncoin",label:"Leboncoin",requiresCredits:!1,icon:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),description:"Envoie un message via la messagerie Leboncoin"},{key:"whatsapp",label:"WhatsApp",requiresCredits:!0,icon:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),description:"Envoie un message WhatsApp au vendeur (nécessite numéro)"},{key:"sms",label:"SMS",requiresCredits:!0,icon:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),description:"Envoie un SMS au vendeur (nécessite numéro)"},{key:"ringlessVoice",label:"Message Vocal (Ringless)",requiresCredits:!0,icon:(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),description:"Dépose un message vocal dans la boîte vocale (nécessite numéro)"}];return(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,b.jsx)("h3",{className:"mb-4 text-sm font-semibold text-zinc-300",children:"Paramètres de prise de contact"}),(0,b.jsx)("div",{className:"space-y-6",children:i.map(i=>{let j=c[i.key],k=(b=>{if("leboncoin"===b);else if("whatsapp"===b)return a.filter(a=>a.channel===ah.EContactChannel.WHATSAPP_TEXT&&!a.audioUrl);else if("sms"===b)return a.filter(a=>"sms"===a.channel&&!a.audioUrl);else if("ringlessVoice"===b)return a.filter(a=>"ringlessVoice"===a.channel&&a.audioUrl);return[]})(i.key);return(0,b.jsxs)("div",{className:`rounded-lg border p-4 transition-colors ${j?"border-amber-900/50 bg-amber-950/10":"border-zinc-800 bg-zinc-950/50"}`,children:[(0,b.jsxs)("div",{className:"mb-3 flex items-start gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:`channel-${i.key}`,checked:j,onChange:()=>{var a;return a=i.key,void f({...c,[a]:!c[a]})},className:"mt-1 h-4 w-4 rounded border-zinc-700 bg-zinc-900 text-amber-500 focus:ring-2 focus:ring-amber-500 focus:ring-offset-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("label",{htmlFor:`channel-${i.key}`,className:"flex items-center gap-2 text-sm font-medium text-zinc-300 cursor-pointer",children:[i.icon,i.label]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:i.description})]})]}),j&&(0,b.jsxs)("div",{className:"mt-3 space-y-3 pl-7",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:`template-${i.key}`,className:"mb-2 block text-xs font-medium text-zinc-400",children:"Template à utiliser"}),0===k.length?(0,b.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 p-3 text-xs text-zinc-500",children:["Aucun template disponible pour ce canal."," ",(0,b.jsx)("a",{href:ac.pages.templates.new(),className:"text-amber-500 hover:underline",children:"Créer un template"})]}):(0,b.jsxs)("select",{id:`template-${i.key}`,value:d[i.key]||"",onChange:a=>{var b,c;return b=i.key,c=a.target.value,void g({...d,[b]:c||null})},className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-3 py-2 text-sm text-zinc-200 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500",children:[(0,b.jsx)("option",{value:"",children:"Sélectionner un template..."}),k.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.audioUrl?"Vocal":"Texte",")"]},a.id))]})]}),i.requiresCredits&&"leboncoin"!==i.key&&(0,b.jsx)("div",{children:"whatsapp"===i.key?(0,b.jsxs)("div",{className:"rounded-lg border border-green-900/30 bg-green-950/20 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"h-4 w-4 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("p",{className:"text-xs font-medium text-green-400",children:"Messages WhatsApp illimités"})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Envoyez jusqu'à 1000 messages WhatsApp par jour gratuitement"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("label",{htmlFor:`credits-${i.key}`,className:"mb-2 block text-xs font-medium text-zinc-400",children:"Crédits à allouer"}),(0,b.jsx)("input",{type:"number",id:`credits-${i.key}`,min:"0",step:"1",value:e?.[i.key]||0,onChange:a=>{var b,c;return b=i.key,c=parseInt(a.target.value)||0,void(h&&h({...e,[b]:c}))},className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-3 py-2 text-sm text-zinc-200 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500",placeholder:"0"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"1 crédit = 1 contact. Ces crédits seront déduits de votre solde d'organisation."})]})})]})]},i.key)})})]})}function aj({value:a,onChange:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-amber-900/50 bg-amber-950/20 p-6 text-center",children:[(0,b.jsx)("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-amber-500/10",children:(0,b.jsx)("svg",{className:"h-6 w-6 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsx)("h3",{className:"mb-2 text-sm font-semibold text-amber-500",children:"Fonctionnalité à venir"}),(0,b.jsx)("p",{className:"text-xs text-zinc-400",children:'Le constructeur de recherche visuel sera disponible dans une prochaine version. En attendant, utilisez l\'onglet "Coller une URL" pour créer vos recherches.'})]}),(0,b.jsxs)("div",{className:"space-y-4 opacity-50 pointer-events-none",children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Plateforme"}),(0,b.jsx)("select",{disabled:!0,className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200",children:(0,b.jsx)("option",{children:"Leboncoin"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Localisation"}),(0,b.jsx)("input",{type:"text",disabled:!0,placeholder:"Ex: Paris",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Prix minimum"}),(0,b.jsx)("input",{type:"number",disabled:!0,placeholder:"0",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Prix maximum"}),(0,b.jsx)("input",{type:"number",disabled:!0,placeholder:"Illimité",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-medium text-zinc-300",children:"Marques"}),(0,b.jsx)("input",{type:"text",disabled:!0,placeholder:"Sélectionner des marques...",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200"})]})]})]})}function ak({value:a,onChange:c}){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"searchUrl",className:"mb-2 block text-sm font-medium text-zinc-300",children:"URL de recherche Leboncoin"}),(0,b.jsx)("input",{id:"searchUrl",type:"url",value:a,onChange:a=>c(a.target.value),placeholder:"https://www.leboncoin.fr/recherche?category=2&...",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 font-mono text-sm text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"}),(0,b.jsx)("p",{className:"mt-2 text-xs text-zinc-500",children:"Effectuez votre recherche sur Leboncoin, puis copiez l'URL complète ici"})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-zinc-800 bg-zinc-950 p-4",children:[(0,b.jsx)("h4",{className:"mb-2 text-sm font-semibold text-zinc-300",children:"Comment obtenir l'URL ?"}),(0,b.jsxs)("ol",{className:"space-y-1 text-xs text-zinc-400",children:[(0,b.jsxs)("li",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-amber-500",children:"1."}),(0,b.jsx)("span",{children:"Allez sur leboncoin.fr et effectuez votre recherche"})]}),(0,b.jsxs)("li",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-amber-500",children:"2."}),(0,b.jsx)("span",{children:"Appliquez tous les filtres souhaités (prix, marque, localisation, etc.)"})]}),(0,b.jsxs)("li",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-amber-500",children:"3."}),(0,b.jsx)("span",{children:"Copiez l'URL complète de la page de résultats"})]}),(0,b.jsxs)("li",{className:"flex gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-amber-500",children:"4."}),(0,b.jsx)("span",{children:"Collez l'URL dans le champ ci-dessus"})]})]})]})]})}function al({templates:a,hunt:c}){let[k,l]=(0,j.useState)("url"),[m,n]=(0,j.useState)(null),o=(0,af.useRouter)(),[p,q]=(0,j.useState)(""),[r,s]=(0,j.useState)({platform:"leboncoin",priceMin:0,priceMax:null,mileageMin:0,mileageMax:null,brands:[],location:"",radius:0}),t=(0,ag.useForm)({resolver:(0,ae.zodResolver)(ad.huntFormSchema),defaultValues:{name:c?.name??"",autoRefresh:c?.autoRefresh??!0,dailyPacingLimit:null,outreachSettings:c?.outreachSettings??{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1},templateIds:c?.templateIds??{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null},channelCredits:{sms:0,whatsapp:0,ringlessVoice:0}}}),u=(0,ag.useWatch)({control:t.control,name:"outreachSettings",defaultValue:{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1}}),v=(0,ag.useWatch)({control:t.control,name:"templateIds",defaultValue:{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null}}),w=(0,ag.useWatch)({control:t.control,name:"channelCredits",defaultValue:{sms:0,whatsapp:0,ringlessVoice:0}}),x=async a=>{if(n(null),!c&&"url"===k&&!p.trim())return void n("Veuillez coller une URL de recherche Leboncoin");try{c?await e(c.id,{name:a.name,autoRefresh:a.autoRefresh,dailyPacingLimit:a.dailyPacingLimit,outreachSettings:a.outreachSettings,templateIds:a.templateIds}):await d({name:a.name,locationId:1,radiusInKm:0,adTypeId:1,autoRefresh:a.autoRefresh,dailyPacingLimit:a.dailyPacingLimit,outreachSettings:a.outreachSettings,templateIds:a.templateIds}),o.push(ac.pages.hunts.list)}catch(a){console.error(c?"Failed to update hunt:":"Failed to create hunt:",a),n(a instanceof Error?a.message:c?"Failed to update hunt":"Failed to create hunt")}};return(0,b.jsx)(h.Form,{...t,children:(0,b.jsxs)("form",{onSubmit:t.handleSubmit(x),className:"space-y-6",children:[m&&(0,b.jsx)("div",{className:"rounded-lg border border-red-900/50 bg-red-950/30 p-4",children:(0,b.jsx)("p",{className:"text-sm text-red-400",children:m})}),(0,b.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,b.jsx)(h.FormField,{control:t.control,name:"name",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-sm font-medium text-zinc-300",children:"Nom de la recherche"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{...a,placeholder:"Ex: Peugeot 308 GTI Paris",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"})}),(0,b.jsx)(h.FormMessage,{className:"text-red-400"})]})})}),(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:[(0,b.jsx)("h3",{className:"mb-4 text-sm font-semibold text-zinc-300",children:"Définir la recherche"}),(0,b.jsxs)($,{value:k,onValueChange:a=>l(a),children:[(0,b.jsxs)(_,{className:"mb-6",children:[(0,b.jsx)(aa,{value:"url",children:"Coller une URL"}),(0,b.jsx)(aa,{value:"builder",children:"Constructeur de recherche"})]}),(0,b.jsx)(ab,{value:"url",children:(0,b.jsx)(ak,{value:p,onChange:q})}),(0,b.jsx)(ab,{value:"builder",children:(0,b.jsx)(aj,{value:r,onChange:s})})]})]}),(0,b.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,b.jsx)(h.FormField,{control:t.control,name:"autoRefresh",render:({field:a})=>(0,b.jsx)(h.FormItem,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(g.Checkbox,{checked:a.value,onCheckedChange:a.onChange,className:"h-4 w-4 rounded border-zinc-700 bg-zinc-900 text-amber-500 focus:ring-2 focus:ring-amber-500 focus:ring-offset-0"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.FormLabel,{className:"text-sm font-medium text-zinc-300 cursor-pointer",children:"Rafraîchissement automatique"}),(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:"Recherche automatiquement de nouvelles annonces tous les jours"})]})]})})})}),(0,b.jsx)("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-6",children:(0,b.jsx)(h.FormField,{control:t.control,name:"dailyPacingLimit",render:({field:a})=>(0,b.jsxs)(h.FormItem,{children:[(0,b.jsx)(h.FormLabel,{className:"text-sm font-medium text-zinc-300",children:"Limite de contacts par jour (optionnel)"}),(0,b.jsx)(h.FormControl,{children:(0,b.jsx)(i.Input,{...a,type:"number",min:"1",max:"1000",value:a.value??"",onChange:b=>a.onChange(b.target.value?parseInt(b.target.value):null),placeholder:"Illimité",className:"w-full rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 text-zinc-200 placeholder-zinc-500 focus:border-amber-500 focus:outline-none focus:ring-1 focus:ring-amber-500"})}),(0,b.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:"Maximum de contacts à effectuer par jour, tous canaux confondus. Laissez vide pour aucune limite."}),(0,b.jsx)(h.FormMessage,{className:"text-red-400"})]})})}),(0,b.jsx)(ai,{templates:a,outreachSettings:u??{leboncoin:!1,whatsapp:!1,sms:!1,ringlessVoice:!1},templateIds:v??{leboncoin:null,whatsapp:null,sms:null,ringlessVoice:null},channelCredits:w??{sms:0,whatsapp:0,ringlessVoice:0},onOutreachChange:a=>t.setValue("outreachSettings",a),onTemplateChange:a=>t.setValue("templateIds",a),onChannelCreditsChange:a=>t.setValue("channelCredits",a)}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(f.Button,{type:"button",onClick:()=>o.back(),variant:"outline",className:"flex-1 rounded-lg border border-zinc-800 bg-zinc-900/50 px-4 py-2 font-medium text-zinc-300 transition-colors hover:bg-zinc-900",children:"Annuler"}),(0,b.jsx)(f.Button,{type:"submit",disabled:t.formState.isSubmitting,className:"flex-1 rounded-lg bg-amber-500 px-4 py-2 font-medium text-black transition-colors hover:bg-amber-400 disabled:cursor-not-allowed disabled:opacity-50",children:t.formState.isSubmitting?"Création...":c?"Enregistrer":"Créer la recherche"})]})]})})}a.s(["HuntForm",()=>al],79538)}];

//# sourceMappingURL=94cdd_config_mono-repo_apps_web_src_components_hunts_hunt-form_tsx_12e18183._.js.map