module.exports=[40972,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(70250)},83737,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},77630,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},90295,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(48638),h=a.r(77630);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},73240,a=>{"use strict";let b=[{key:"WHATSAPP_TEXT",value:"whatsapp_text",label:"Message WhatsApp",shortLabel:"WhatsApp",description:"Messages texte via WhatsApp Business",icon:"message-circle",color:"green"},{key:"SMS",value:"sms",label:"SMS",shortLabel:"SMS",description:"Messages texte par SMS",icon:"message-square",color:"blue"},{key:"RINGLESS_VOICE",value:"ringless_voice",label:"Message Vocal",shortLabel:"Vocal",description:"Messages vocaux sans sonnerie",icon:"phone",color:"purple"}],c=Object.fromEntries(b.map(a=>[a.key,a.value]));b.map(a=>a.value);let d=[{key:"PENDING",value:"pending",label:"En attente",description:"Message en file d'attente",icon:"clock",color:"#eab308",class:"bg-yellow-900/30 text-yellow-400 border-yellow-900/50"},{key:"SENT",value:"sent",label:"Envoyé",description:"Message envoyé avec succès",icon:"send",color:"#3b82f6",class:"bg-blue-900/30 text-blue-400 border-blue-900/50"},{key:"DELIVERED",value:"delivered",label:"Délivré",description:"Message délivré au destinataire",icon:"check",color:"#22c55e",class:"bg-green-900/30 text-green-400 border-green-900/50"},{key:"FAILED",value:"failed",label:"Échoué",description:"Échec de l'envoi",icon:"x",color:"#ef4444",class:"bg-red-900/30 text-red-400 border-red-900/50"},{key:"READ",value:"read",label:"Lu",description:"Message lu par le destinataire",icon:"check-check",color:"#a855f7",class:"bg-purple-900/30 text-purple-400 border-purple-900/50"},{key:"REPLIED",value:"replied",label:"Répondu",description:"Destinataire a répondu",icon:"reply",color:"#10b981",class:"bg-emerald-900/30 text-emerald-400 border-emerald-900/50"}],e=Object.fromEntries(d.map(a=>[a.key,a.value])),f=d.map(a=>a.value);a.s(["EContactChannel",0,c,"EMessageStatus",0,e,"MESSAGE_STATUS_VALUES",0,f,"WHATSAPP_DAILY_LIMIT",0,1e3,"getMessageStatusConfig",0,a=>{let b=d.find(b=>b.value===a);if(!b)throw Error(`Invalid message status: ${a}`);return b}])},5522,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(82260)},14392,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},59760,a=>{"use strict";a.i(5327);var b=a.i(25822),c=a.i(21732);let d=process.env.WORKER_API_URL,e=process.env.WORKER_API_SECRET,f=async(a,c)=>{if(!d||!e)return{success:!1,error:b.EGeneralErrorCode.UNKNOWN_ERROR};try{let f=await fetch(`${d}${a}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(c)}),g=await f.json();if(!f.ok)return{success:!1,error:g.error||b.EGeneralErrorCode.UNKNOWN_ERROR};return g}catch{return{success:!1,error:b.EGeneralErrorCode.UNKNOWN_ERROR}}};a.s(["sendSms",0,a=>f(c.WORKER_ROUTES.PHONE_SMS,a),"sendWhatsAppText",0,a=>f(c.WORKER_ROUTES.WHATSAPP_TEXT,a)])},41481,a=>{"use strict";a.i(96875);var b=a.i(42810),c=a.i(10919),d=a.i(25822),e=a.i(81446);let f=async(a,b)=>{let c=b||await (0,e.createDrizzleSupabaseClient)(),d=await c.rls(b=>b.query.whatsappSessions.findFirst({where:(b,{eq:c})=>c(b.accountId,a)}));if(!d||!d.credentials)return{session:d||null,credentials:null};try{let a=JSON.parse(d.credentials);return{session:d,credentials:a}}catch{return{session:d,credentials:null}}},g=async(a,b,f)=>{let g=f||await (0,e.createDrizzleSupabaseClient)(),h=JSON.stringify(b);try{return await g.rls(b=>b.insert(c.whatsappSessions).values({accountId:a,credentials:h,isConnected:!0,lastConnectedAt:new Date,updatedAt:new Date}).onConflictDoUpdate({target:c.whatsappSessions.accountId,set:{credentials:h,isConnected:!0,lastConnectedAt:new Date,updatedAt:new Date}})),{success:!0}}catch{return{success:!1,errorCode:d.EWhatsAppErrorCode.SESSION_SAVE_FAILED}}},h=async({accountId:a,isConnected:f,dbClient:g})=>{let h=g||await (0,e.createDrizzleSupabaseClient)();try{return await h.rls(d=>d.update(c.whatsappSessions).set({isConnected:f,lastConnectedAt:f?new Date:c.whatsappSessions.lastConnectedAt,updatedAt:new Date}).where((0,b.eq)(c.whatsappSessions.accountId,a))),{success:!0}}catch{return{success:!1,errorCode:d.EGeneralErrorCode.DATABASE_ERROR}}};a.s(["getWhatsAppSession",0,f,"saveWhatsAppSession",0,g,"updateWhatsAppConnectionStatus",0,h])},407,a=>{"use strict";var b=a.i(73049);a.s([],32991),a.i(32991),a.s(["404cfac02d87802163a841d97d0d8e0580084d8556",()=>b.sendWhatsAppTextMessage,"40703773bf7dc79dddd1c34449997ac0d101b2ce15",()=>b.initiateWhatsAppConnection,"702045eb6e8119159160fa1f5e04183088b1a4a9f8",()=>b.updateWhatsAppPhoneNumber],407)}];

//# sourceMappingURL=Projets_auto-prospect-worktrees_config_mono-repo_56bfd8d7._.js.map